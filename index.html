<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Making People Happy | Jarno Alastalo</title>
  <meta name="description" content="Teen teknologiasta ymm√§rrett√§v√§√§ ‚Äì ja ihmisest√§ n√§kyv√§√§. Jarno Alastalo.">

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://makingpeoplehappy.fi/">
  <meta property="og:title" content="Making People Happy | Jarno Alastalo">
  <meta property="og:description" content="Teen teknologiasta ymm√§rrett√§v√§√§ ‚Äì ja ihmisest√§ n√§kyv√§√§. Tulkki koneen ja ihmisen v√§lill√§.">
  <meta property="og:image" content="https://makingpeoplehappy.fi/images/mphog.png">

  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://makingpeoplehappy.fi/">
  <meta property="twitter:title" content="Making People Happy | Jarno Alastalo">
  <meta property="twitter:description" content="Teen teknologiasta ymm√§rrett√§v√§√§ ‚Äì ja ihmisest√§ n√§kyv√§√§. Tulkki koneen ja ihmisen v√§lill√§.">
  <meta property="twitter:image" content="https://makingpeoplehappy.fi/images/mphog.png">

  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>">
  
  <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Inter:wght@300;400;600&family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet" />
  
  <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
  </script>

  <style>
    /* --- TYYLIT (CSS) --- */
    :root {
      --bg: #111113;         /* Syv√§, melkein musta */
      --ink: #e0e0e0;        /* Murrettu harmaa teksti */
      --accent: #d4af37;     /* Himme√§ kulta */
      --orange: #ffbe3c;     /* Oranssinkeltainen br√§ndiv√§ri */
      --card: #1a1a1d;       /* Korttien tausta */
      --border: #333;        /* Reunukset */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.6;
    }
    
    a { color: inherit; text-decoration: none; border-bottom: 1px solid var(--accent); transition: 0.2s; }
    a:hover { background: var(--accent); color: #000; }

    /* Layout */
    .container { max-width: 1000px; margin: 0 auto; padding: 0 24px; }
    
    section { padding: 60px 0; position: relative; border-bottom: 1px solid var(--border); }

    /* Typography */
    h1, h2, h3 { font-family: "Space Grotesk", sans-serif; font-weight: 700; letter-spacing: -0.5px; }
    
    h1 {
        font-size: clamp(2.5rem, 6vw, 5rem);
        line-height: 1.1;
        margin: 0 0 24px;
        color: #fff;
    }
    
    .brand-title {
        font-family: "Inter", sans-serif;
        color: var(--orange);
        font-size: clamp(1.2rem, 2.5vw, 1.6rem);
        margin: 0 0 16px;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 700;
        display: block;
    }
    
    p.lead {
        max-width: 65ch;
        margin: 0 0 32px;
        font-size: clamp(1.1rem, 1.5vw, 1.25rem);
        line-height: 1.6;
        font-weight: 300;
        color: #ccc;
    }

    /* Hero */
    .hero {
        min-height: 80vh; 
        display: flex;
        flex-direction: column;
        justify-content: center;
        position: relative;
        overflow: hidden;
        border-bottom: none;
        padding-bottom: 20px;
    }
    .hero-canvas { position: absolute; inset: 0; z-index: 0; width: 100%; height: 100%; touch-action: pan-y; opacity: 0.6; }
    .hero-content { position: relative; z-index: 1; pointer-events: none; }
    .hero-content * { pointer-events: auto; }

    /* Services Layout */
    #palvelut { padding-top: 20px; }
    
    .grid-services { display: grid; gap: 40px; grid-template-columns: repeat(2, 1fr); margin-top: 40px; }
    
    @media (max-width: 768px) { 
        .grid-services { grid-template-columns: 1fr; } 
    }

    .service-item {
        background: rgba(255,255,255,0.02);
        padding: 30px;
        border: 1px solid var(--border);
        border-radius: 4px;
        display: flex;
        flex-direction: column;
    }
    .service-item h3 { margin-top: 0; font-size: 1.4rem; color: #fff; border-bottom: 2px solid var(--accent); display: inline-block; padding-bottom: 8px; margin-bottom: 16px;}
    .service-item p { font-size: 1rem; color: #bbb; margin-bottom: 16px; }
    
    .example-list {
        list-style: none;
        padding: 0;
        margin: 0;
        font-size: 0.95rem;
        color: #aaa;
    }
    .example-list li {
        margin-bottom: 12px;
        padding-left: 16px;
        border-left: 2px solid #444;
    }
    .example-list strong { color: #e0e0e0; }

    /* Why Me Layout */
    .grid-whyme { 
        display: grid; 
        gap: 50px; 
        grid-template-columns: 1fr 2fr; 
        align-items: center; 
        margin-top: 40px; 
    }
    
    .jarno-image img {
        width: 100%;
        max-width: 400px;
        height: auto;
        display: block;
        margin: 0 auto;
        border-radius: 8px; 
        filter: grayscale(100%) contrast(1.1); 
    }

    @media (max-width: 768px) { 
        .grid-whyme { grid-template-columns: 1fr; text-align: left; } 
        .jarno-image img { max-width: 250px; margin-bottom: 20px; }
    }
    
    .quote-box {
        background: var(--accent);
        color: #111;
        padding: 30px;
        border-radius: 4px;
        font-family: "Space Grotesk", sans-serif;
        font-weight: 500;
        font-size: 1.1rem;
        position: relative;
        margin-top: 30px;
    }
    .quote-box::before { content: "‚Äù"; font-size: 4rem; position: absolute; top: -20px; left: 20px; opacity: 0.3; }

    /* Book Section Layout */
    .grid-book { display: grid; gap: 60px; grid-template-columns: 1fr 2fr; align-items: center; }
    @media (max-width: 768px) { 
        .grid-book { grid-template-columns: 1fr; text-align: center; } 
        .book-image img { margin: 0 auto; display: block; }
    }
    .book-image img {
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        border-radius: 4px;
        transition: transform 0.3s;
    }
    .book-image img:hover { transform: scale(1.02); }

    /* Footer */
    footer { padding: 80px 0; background: #0b0b0c; font-size: 1rem; color: #bbb; }
    .contact-block { margin-top: 40px; }
    .contact-block p { margin: 8px 0; }

    /* Canvas specific */
    #explodeCanvas { display: block; width: 100%; height: 200px; margin-top: -1px; }
    
    .btn {
        display: inline-block;
        padding: 12px 24px;
        border: 1px solid var(--accent);
        color: var(--accent);
        margin-right: 16px;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.9rem;
        border-bottom: 1px solid var(--accent) !important; 
    }
    .btn:hover { background: var(--accent); color: #000; }
  </style>
</head>
<body>

<nav style="position: absolute; top: 20px; right: 24px; z-index: 100;">
  <a href="/en/" style="color: #fff; font-weight: 600; text-decoration: none; display: flex; align-items: center; gap: 8px; font-size: 0.9rem; border-bottom: none;">
    EN <span style="font-size: 1.2rem;">üá¨üáß</span>
  </a>
</nav>

  <section class="hero">
    <div id="canvas-container" class="hero-canvas"></div> 
    
    <div class="container hero-content">
      <span class="brand-title">Making People Happy</span>
      
      <h1>Teen teknologiasta ymm√§rrett√§v√§√§ ‚Äì ja ihmisest√§ n√§kyv√§√§.</h1>
      
      <p class="lead">
        Olen Jarno Alastalo, ja Making People Happy on yritykseni. Olen rakentanut mustia laatikoita ja n√§hnyt niiden sis√§puolen. Tied√§n miten algoritmit ajattelevat ‚Äì ja miten ihmiset k√§ytt√§ytyv√§t niiden kanssa. Toimin tulkkina koneen ja ihmisen v√§lill√§.
      </p>

      <div style="margin-top: 32px;">
        <a href="#palvelut" class="btn">Mit√§ teemme</a>
        <a href="#yhteys" style="border-bottom: none; color: #fff; margin-left: 10px;">Ota yhteytt√§ &rarr;</a>
      </div>
    </div>
  </section>

  <section id="palvelut">
    <div class="container">
      <h2>Mit√§ teemme</h2>
      
      <div class="grid-services">
        <div class="service-item">
            <h3>1. Luennot ja puheenvuorot ‚Äì erityisesti teko√§lyst√§ ja somesta</h3>
            <p>Puhun teko√§lyst√§ tavalla, joka ei ole taikuutta eik√§ teknopuhepiiri√§. Kerron miksi algoritmit tekev√§t mit√§ tekev√§t. Lis√§ksi minulla on vahva osaaminen digitaalisista yhteis√∂ist√§ ja niiden dynamiikasta.</p>
            
            <p style="margin-bottom: 8px; color: #fff; font-weight: 600;">Esimerkkej√§:</p>
            <ul class="example-list">
                <li><strong>√Ñlytt√∂mi√§ tekoja vai teko√§ly√§?</strong> (perustuu Musta laatikko -kirjaan)</li>
                <li><strong>Digitaaliset identiteetit, yksin√§isyys ja yhteis√∂t</strong><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Miten verkossa luodut identiteetit kohtaavat todellisen el√§m√§n? Miksi some ei poista yksin√§isyytt√§ ‚Äì ja miten digiyhteis√∂t voisivat tukea meit√§ autenttisesti?</span>
                </li>
                <li><strong>Digitalisaatio, ilmasto ja arki</strong><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Miten media- ja nuorisoty√∂ss√§ voi huomioida digitalisaation ymp√§rist√∂vaikutukset arkitasolla?</span>
                </li>
                <li><strong>Algoritmien musta laatikko</strong></li>
            </ul>

            <div style="margin-top: auto; padding-top: 20px;">
                <a href="https://jarnoalastalo.com/" target="_blank" style="font-weight: 600; font-size: 0.95rem; color: var(--accent);">Lis√§√§ luennoista & referenssej√§ &rarr;</a>
            </div>
        </div>

        <div class="service-item">
            <h3>2. Koulutukset ja ty√∂pajat ‚Äì teko√§ly arkeen</h3>
            <p>J√§rjest√∂ille, kasvattajille, nuorisoty√∂ntekij√∂ille. K√§yt√§nn√∂nl√§heisi√§ ty√∂pajoja, joissa teko√§ly muuttuu ty√∂kaluksi eik√§ uhkaksi. Opetan k√§ytt√§m√§√§n teko√§ly√§ viisaasti ‚Äì ei sokeasti.</p>
            
            <p style="margin-bottom: 8px; color: #fff; font-weight: 600;">Esimerkkej√§:</p>
            <ul class="example-list">
                <li><strong>Niukkuudesta voimavaraksi</strong><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Strateginen ty√∂paja siit√§, miten teko√§ly vapauttaa aikaa hallinnosta ihmisten kohtaamiseen ja vaikuttamisty√∂h√∂n.</span>
                </li>
                <li><strong>Kehitt√§miskumppanuudet</strong><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Pitk√§kestoinen tuki yrityksille, ammattikorkeoille ja j√§rjest√∂ille (mm. Humak, ADHD-liitto, Mieli ry) teko√§lyn jalkauttamisessa viestint√§√§n, hanke/rahoitushakuihin ja tiedolla johtamiseen.</span>
                </li>
                <li><strong>Nuorisoty√∂n teko√§lyty√∂pajat</strong><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Perustuen <em>80 n√§k√∂kulmaa teko√§lyyn</em> -oppaaseen: Miten teko√§ly vaikuttaa nuorten identiteettiin ja arkeen?</span>
                </li>
            </ul>
        </div>

        <div class="service-item">
            <h3>3. Sis√§ll√∂ntuotanto ‚Äì videot ja pitk√§t formaatit</h3>
            <p>Teen sis√§lt√∂√§, joka vie mukanaan. Haastatteluja, dokumentteja, oppaita. Kyky tiivist√§√§ monimutkainen ilmi√∂ ymm√§rrett√§v√§ksi paketiksi.</p>
            
            <p style="margin-bottom: 8px; color: #fff; font-weight: 600;">Esimerkki:</p>
            <ul class="example-list">
                <li>
                    <a href="https://mediakasvatus.fi/materiaali/nakokulmia_tekoalyyn_opas_nuorten_parissa_toimiville/" target="_blank" style="color: #fff; text-decoration: underline;">80 n√§k√∂kulmaa teko√§lyyn ‚Äì opas nuorten parissa toimiville</a><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Ilmainen opas, joka perustuu 30+ asiantuntijahaastatteluun.</span>
                </li>
                <li>
                    <a href="https://www.youtube.com/watch?v=x8AR0r6nD90&list=PLjB4rN4v0oefVYa1pUehlOczhbmpVM5hp" target="_blank" style="color: #fff; text-decoration: underline;">Tarinoita tilastojen takaa - nuorisoty√∂ntekij√§t n√§kyv√§ksi</a><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Videotuotanto.</span>
                </li>
            </ul>
        </div>
        
        <div class="service-item">
            <h3>4. Digitaalisten yhteis√∂jen suunnittelu</h3>
            <p>Olen rakentanut yhteis√∂j√§, joissa miljoonat ihmiset kohtaavat. Tied√§n mik√§ saa ihmiset j√§√§m√§√§n, luottamaan ja palaamaan. Suunnittelen palveluita, joissa teknologia palvelee ihmist√§ ‚Äì ei p√§invastoin.</p>
        </div>

      

        <div class="service-item">
            <h3>5. Ketter√§t verkkototeutukset (One-pagers)</h3>
            <p>Ideasta valmiiksi verkkosivuksi ‚Äì nopeasti. Toteutan visuaalisia ja toiminnallisia yhden sivun kokonaisuuksia (one-pagers), jotka toimivat kampanjasivuina, tietoraportteina tai konseptidemoina.</p>
            
            <p style="margin-bottom: 8px; color: #fff; font-weight: 600;">Esimerkki:</p>
            <ul class="example-list">
                <li>
                    <a href="https://csy.fi/ai-energy-calculator/" target="_blank" style="color: #fff; text-decoration: underline;">AI Energy Calculator</a><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">Laskuri, joka havainnollistaa generatiivisen teko√§lyn energiankulutusta.</span>
                </li>
            </ul>
            <ul class="example-list">
                <li>
                    <a href="https://csy.fi/" target="_blank" style="color: #fff; text-decoration: underline;">Computer Says Yes Lab</a><br>
                    <span style="font-size: 0.9em; opacity: 0.8;">One-pager: CSY Lab on ty√∂skentelyalusta, joka pureutuu teko√§lyn mustaan laatikkoon ja paljastaa ihmisyyden rajat. </span>
                </li>
            </ul>
        </div>

      </div>
    </div>
  </section>

  <section id="miksi">
    <div class="container">
        <h2>Miksi min√§?</h2>
        
        <div class="grid-whyme">
            <div class="jarno-image">
                <img src="images/jarno.png" alt="Jarno Alastalo">
            </div>

            <div>
                <h3 style="margin-top: 0; color: #fff;">Jarno Alastalo</h3>
                <p>En ole vain puhuja teko√§lyst√§. Olen suunnitellut Suomi24:n yhteis√∂n, Heimon, suunnitellut mustia laatikoita yrityksille. Olen n√§hnyt miten algoritmit muokkaavat tunteita, miten yhteis√∂t toimivat ja miten teknologia muuttaa ihmist√§.</p>
                <p>Kirjoitan kirjoja (Musta laatikko, Pime√§ netti, Oudot tyypit, Sometarinoita Suomesta). Teen sis√§lt√∂j√§ nuorille ja nuorisoty√∂ntekij√∂ille. Ja puhun niin, ett√§ se ymm√§rret√§√§n ‚Äì ei niin ett√§ kuulostaa fiksulta.</p>
                
                <div class="quote-box">
                    <p style="margin:0;">YLE Radio Suomen mukaan olen Suomen johtava kissavideoasiantuntija. Se kertoo jotain siit√§, ett√§ ymm√§rr√§n mik√§ ihmisi√§ liikuttaa.</p>
                </div>
            </div>
        </div>
    </div>
  </section>

  <section id="kirja" style="background: rgba(255,255,255,0.03);">
    <div class="container">
        <div class="grid-book">
            <div class="book-image">
                <img src="images/mustalaatikkokansi.jpg" alt="Musta laatikko -kirjan kansi" style="width: 100%; max-width: 320px; display: block;">
            </div>
            <div class="book-info">
                <span style="color: var(--orange); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; font-size: 0.9rem;">Juuri ilmestynyt</span>
                <h2 style="margin-top: 10px; margin-bottom: 16px; color: #fff;">Musta laatikko ‚Äì teko√§lytt√∂myyden ajan alku</h2>
                <p>Olemme astuneet teko√§lytt√∂myyden aikaan: joko tulemme √§lykk√§iden koneiden tyhmiksi k√§ytt√§jiksi tai opimme k√§ytt√§m√§√§n niit√§ viisaasti.</p>
                <p>Teko√§ly toimii mustassa laatikossa ‚Äì j√§rjestelm√§ss√§, jonka toimintaa emme n√§e, mutta jonka vaikutukset tunnemme. T√§m√§ kirja on tutkimusmatka pinnan alle: miten algoritmit muokkaavat tunteitamme, valintojamme ja yhteis√∂j√§mme.</p>
                <div style="margin-top: 24px;">
                    <a href="https://avain.net/tuote/jarno-alastalo/musta-laatikko-teko%C3%A4lytt%C3%B6myyden-ajan-alku/9789523046559" target="_blank" class="btn">Tutustu ja tilaa</a>
                </div>
            </div>
        </div>
    </div>
  </section>

  <div style="background: #1a1a1d; overflow: hidden; height: 150px; border-top: 1px solid #333; border-bottom: 1px solid #333;">
    <canvas id="explodeCanvas"></canvas>
  </div>

  <section id="yhteys" style="border-bottom: none;">
    <div class="container">
        <h2>Ota yhteytt√§</h2>
        
        <div class="contact-block">
            <p style="font-size: 1.2rem; font-weight: 700; color: #fff;">Jarno Alastalo</p>
            <p><a href="mailto:jarno@makingpeoplehappy.fi" style="color: var(--accent); border-bottom: 1px solid var(--accent);">jarno@makingpeoplehappy.fi</a></p>
            <p style="margin-top: 8px;">
                <a href="https://www.linkedin.com/in/alastalo/" target="_blank" style="color: #bbb; text-decoration: underline;">LinkedIn</a>
            </p>
            <p style="margin-top: 24px; color: #eee;">Haluatko kuulla lis√§√§? Laita viesti√§. Vastaan.</p>
        </div>
    </div>
  </section>

  <footer>
    <div class="container">
        <p>&copy; 2026 MPH Making People Happy</p>
        <p style="opacity: 0.6; font-size: 0.9rem;">Y-tunnus: 2578992-5</p>
    </div>
  </footer>

<script type="module">
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

    // --- ASETTELU (SIIRRET√Ñ√ÑN N√ÑKYM√Ñ√Ñ, EI PUUTA) ---
    // Positiivinen X = Puu siirtyy vasemmalle
    // Negatiivinen X = Puu siirtyy oikealle (T√§t√§ haluamme desktopilla)
    // Positiivinen Y = Puu siirtyy yl√∂s
    // Negatiivinen Y = Puu siirtyy alas (T√§t√§ haluamme mobiilissa)
    const CONFIG = {
        desktop: {
            offsetX: -0.25, // Siirr√§ puuta oikealle 25% ruudun leveydest√§
            offsetY: 0.0    // Pidet√§√§n pystysuunnassa keskell√§
        },
        mobile: {
            offsetX: 0.0,   // Sivusuunnassa keskell√§
            offsetY: -0.2   // Siirr√§ puuta alas 20% ruudun korkeudesta
        }
    };

    // --- SHADERS ---
    const leavesVS = `
        uniform sampler2D uNoiseMap;
        uniform vec3 uBoxMin, uBoxSize;
        uniform float uTime;
        varying vec3 vObjectPos, vNormal, vWorldNormal; 
        varying float vCloseToGround;
        
        vec4 getTriplanar(sampler2D tex){
            vec4 xPixel = texture(tex, (vObjectPos.xy + uTime) / 3.);
            vec4 yPixel = texture(tex, (vObjectPos.yz + uTime) / 3.);
            vec4 zPixel = texture(tex, (vObjectPos.zx + uTime) / 3.);
            vec4 combined = (xPixel + yPixel + zPixel) / 6.0;
            combined.xyz = combined.xyz * vObjectPos; 
            return combined;
        }
        
        void main(){
            vec3 vWorldPos = vec3(modelMatrix * instanceMatrix * vec4(position, 1.));
            
            // T√ÑM√Ñ oli se ongelmakohta: Nyt kun puu on aina y=-2, t√§m√§ toimii aina oikein!
            vCloseToGround = clamp(vWorldPos.y, 0., 1.);
            
            vNormal = normalMatrix * mat3(instanceMatrix) * normalize(normal); 
            vWorldNormal = vec3(modelMatrix * instanceMatrix * vec4(normal, 0.));
            
            vObjectPos = ((vWorldPos - uBoxMin) * 2.) / uBoxSize - vec3(1.0); 
            
            vec4 noiseOffset = getTriplanar(uNoiseMap) * vCloseToGround; 
            vec4 newPos = instanceMatrix * vec4(position, 1.); 
            
            newPos.xyz = newPos.xyz + (noiseOffset.xyz * 0.8);
            
            gl_Position =  projectionMatrix * modelViewMatrix * newPos;
        }
    `;

    const leavesFS = `
        #include <common> 
        #include <lights_pars_begin>
        uniform vec3 uColorA, uColorB, uColorC;
        varying vec3 vObjectPos, vNormal, vWorldNormal; 
        varying float vCloseToGround;
        
        vec3 mix3 (vec3 v1, vec3 v2, vec3 v3, float fa){
            vec3 m; 
            fa > 0.7 ? m = mix(v2, v3, (fa - .5) * 2.) : m = mix(v1, v2, fa * 2.);
            return m;
        }

        float getPosColors(){
            float p = smoothstep(0.2, 0.8, distance(vec3(0.), vObjectPos));
            p = p * (-(vWorldNormal.g / 2.) + 0.5) * (- vObjectPos.y / 9. + 0.5); 
            return p;
        }
        float getDiffuse(){
            float intensity;
            for (int i = 0; i < directionalLights.length(); i++){
                intensity = dot(directionalLights[i].direction, vNormal);
                intensity = smoothstep(0.55, 1., intensity) * 0.2 + pow(smoothstep(0.55, 1., intensity), 0.5);
            }
            return intensity;
        }

        void main(){
            float gradMap = (getPosColors() + getDiffuse()) * vCloseToGround / 2. ;
            vec4 c = vec4(mix3(uColorA, uColorB, uColorC, gradMap), 1.0);
            gl_FragColor = vec4(pow(c.xyz,vec3(0.454545)), c.w);
        }
    `;

    const container = document.getElementById('canvas-container');
    
    if (container) {
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x111113, 0.025); 

        const loader = new GLTFLoader();
        
        // FOV 25: Sopiva teleobjektiivi, ei v√§√§rist√§ mutta on syvyytt√§
        const camera = new THREE.PerspectiveCamera(25, container.clientWidth / container.clientHeight, 0.1, 1000);
        
        const renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.autoRotate = true;       
        controls.autoRotateSpeed = 0.8;   
        controls.enableRotate = false;    
        controls.enableZoom = false;      
        controls.enablePan = false;       

        // VALOT
        const mainLight = new THREE.DirectionalLight(0xffffff, 2.0);
        mainLight.position.set(3, 10, -3);
        scene.add(mainLight);
        scene.add(new THREE.AmbientLight(0x404040, 3.5)); 

        const noiseMap = new THREE.TextureLoader().load('https://raw.githubusercontent.com/ceramicSoda/treeshader/main/assets/noise.png');
        noiseMap.wrapS = THREE.RepeatWrapping;
        noiseMap.wrapT = THREE.RepeatWrapping;

        const treeGroup = new THREE.Group();
        scene.add(treeGroup);

        const dummy = new THREE.Object3D();
        const matrix = new THREE.Matrix4();
        
        // MATERIAALIT
        const leavesMat = new THREE.ShaderMaterial({
            lights: true,
            side: THREE.DoubleSide,
            uniforms: {
                ...THREE.UniformsLib.lights,
                uTime: {value: 0.},
                uColorA: {value: new THREE.Color(0x050505)}, 
                uColorB: {value: new THREE.Color(0x8a7000)}, 
                uColorC: {value: new THREE.Color(0xd4af37)}, 
                uBoxMin: {value: new THREE.Vector3(0,0,0)},
                uBoxSize: {value: new THREE.Vector3(10,10,10)},
                uNoiseMap: {value: noiseMap},
            },
            vertexShader: leavesVS,
            fragmentShader: leavesFS,
        });

        // PUUN LATAUS
        let treeData = {};

        loader.loadAsync("https://raw.githubusercontent.com/ceramicSoda/treeshader/main/assets/tree.glb")
        .then(obj => {
            const pole = obj.scene.getObjectByName("Pole");
            pole.material = new THREE.MeshStandardMaterial({color: 0x222222, roughness: 0.8});
            
            const crown = obj.scene.getObjectByName("Leaves");
            
            treeData.leavesCount = crown.geometry.attributes.position.count;
            treeData.deadID = []; 
            treeData.leafGeometry = obj.scene.getObjectByName("Leaf").geometry; 
            treeData.leaves = new THREE.InstancedMesh(treeData.leafGeometry, leavesMat, treeData.leavesCount); 
            
            for (let i = 0; i < treeData.leavesCount; i++) { 
                dummy.position.x = crown.geometry.attributes.position.array[i*3];
                dummy.position.y = crown.geometry.attributes.position.array[i*3+1];
                dummy.position.z = crown.geometry.attributes.position.array[i*3+2];
                dummy.lookAt(
                    dummy.position.x + crown.geometry.attributes.normal.array[i*3],
                    dummy.position.y + crown.geometry.attributes.normal.array[i*3+1],
                    dummy.position.z + crown.geometry.attributes.normal.array[i*3+2]
                );
                const s = Math.random() * 0.5 + 0.5;
                dummy.scale.set(s,s,s);
                dummy.updateMatrix();
                treeData.leaves.setMatrixAt(i, dummy.matrix);
            }
            
            treeGroup.add(pole, treeData.leaves);
            
            // ASETA PUU KESKELLE (Paras paikka shaderille)
            treeGroup.position.set(0, -2, 0);

            // Aseta n√§kym√§n siirto
            updateViewOffset();

            treeGroup.updateMatrixWorld(true);
            const bbox = new THREE.Box3().setFromObject(treeGroup);
            leavesMat.uniforms.uBoxMin.value.copy(bbox.min); 
            leavesMat.uniforms.uBoxSize.value.copy(bbox.getSize(new THREE.Vector3())); 
            
            killRandom();
        });

        // --- N√ÑKYM√ÑN SIIRTO (View Offset) ---
        function updateViewOffset() {
            const width = container.clientWidth;
            const height = container.clientHeight;
            const isMobile = width < 900;
            
            const conf = isMobile ? CONFIG.mobile : CONFIG.desktop;

            // Kamera pysyy aina samassa paikassa suhteessa puuhun!
            camera.position.set(0, 2, -35);
            controls.target.set(0, 4, 0);
            
            // "Lens Shift" - Siirret√§√§n kuvaa v√§√§rist√§m√§tt√§ perspektiivi√§
            // viewOffset toimii pikseleiss√§, joten kerrotaan suhdeluvulla
            camera.setViewOffset(
                width, 
                height, 
                width * conf.offsetX,   // X offset
                height * conf.offsetY,  // Y offset
                width, 
                height
            );
            
            camera.updateProjectionMatrix();
        }

        function killRandom() {
            if (treeData.deadID) treeData.deadID.push(Math.floor(Math.random() * treeData.leavesCount)); 
            setTimeout(killRandom, Math.random() * 1000 + 500); 
        }

        function animate() {
            requestAnimationFrame(animate);
            leavesMat.uniforms.uTime.value += 0.01; 

            if (treeData.deadID && treeData.leaves){
                treeData.deadID = treeData.deadID.filter(i => {
                    treeData.leaves.getMatrixAt(i, matrix);
                    matrix.decompose(dummy.position, dummy.rotation, dummy.scale);
                    
                    if (dummy.position.y > -5) { 
                        dummy.position.y -= 0.03; 
                        dummy.position.x += Math.sin(leavesMat.uniforms.uTime.value + i) * 0.01;
                        dummy.rotation.x += 0.05; 
                        dummy.rotation.y += 0.05;
                        dummy.updateMatrix();
                        treeData.leaves.setMatrixAt(i, dummy.matrix);
                        return true;
                    }
                    return false; 
                });
                treeData.leaves.instanceMatrix.needsUpdate = true; 
            } 

            controls.update(); 
            renderer.render(scene, camera); 
        }

        window.addEventListener("resize", () => {
            if (!container) return;
            // P√§ivit√§ renderer
            renderer.setSize(container.clientWidth, container.clientHeight);
            // P√§ivit√§ kameran kuvasuhde ja OFFSETIT
            camera.aspect = container.clientWidth / container.clientHeight;
            updateViewOffset();
        });

        animate();
    }
</script>

  <script type="module">
    import * as THREE from 'three';

    (function(){
      const cvs = document.getElementById('explodeCanvas'); if(!cvs) return;
      const ren = new THREE.WebGLRenderer({canvas:cvs, antialias:true, alpha:true});
      const scn = new THREE.Scene();
      const cam = new THREE.PerspectiveCamera(5, 1, 0.1, 50); 
      cam.position.set(0, 0, 10); 

      const pts = [];
      const count = 300;
      for(let i=0; i<count; i++) {
        pts.push((Math.random()-0.5)*30, (Math.random()-0.5)*10, (Math.random()-0.5)*5);
      }
      
      const geo = new THREE.BufferGeometry();
      geo.setAttribute('position', new THREE.Float32BufferAttribute(pts, 3));
      
      const mat = new THREE.PointsMaterial({
          color: 0x444444,
          size: 0.1,
          transparent: true,
          opacity: 0.8
      });
      
      const starSystem = new THREE.Points(geo, mat);
      scn.add(starSystem);
      
      function rsz(){ 
          const r = cvs.parentElement.getBoundingClientRect(); 
          ren.setSize(r.width, 150, false); 
          cam.aspect = r.width / 150; 
          cam.updateProjectionMatrix(); 
      }
      window.addEventListener('resize', rsz); rsz();
      
      function tick(){ 
          requestAnimationFrame(tick); 
          starSystem.rotation.x += 0.001;
          starSystem.position.x = Math.sin(Date.now()*0.0005) * 2;
          ren.render(scn, cam); 
      } 
      tick();
    })();
  </script>
</body>
</html>